<template>
  <div class="home-page">
    <!-- Hero Section -->
    <section class="hero-section">
      <div class="container">
        <div class="hero-content">
          <h1 class="hero-title">–ü—Ä–µ–º–∏–∞–ª—å–Ω–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –¥–ª—è –ª—é–±—ã—Ö –∑–∞–¥–∞—á</h1>
          <p class="hero-subtitle">–ù–∞–π–¥–∏—Ç–µ –∏–¥–µ–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã, —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
          <div class="hero-cta">
            <NuxtLink to="/catalog" class="btn btn-primary btn-lg">–ü–µ—Ä–µ–π—Ç–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥</NuxtLink>
          </div>
        </div>
        <div class="hero-image">
          <!-- Placeholder for hero image -->
          <div class="hero-image-placeholder">
            <PlaceholderImage 
              width="100%" 
              height="300px" 
              bgColor="rgba(51, 102, 255, 0.1)" 
              fontSize="2rem"
            />
            <div class="hero-badge">–°–∫–∏–¥–∫–∞ 30% –Ω–∞ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å—ã!</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Popular Products Section -->
    <section class="products-section">
      <div class="container">
        <h2 class="section-title">–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã</h2>
        <div v-if="productStore.loading" class="loading-spinner">
          –ó–∞–≥—Ä—É–∑–∫–∞...
        </div>
        <div v-else-if="productStore.error" class="error-message">
          {{ productStore.error }}
        </div>
        <div v-else class="product-grid">
          <ProductCard 
            v-for="product in featuredProducts" 
            :key="product.id" 
            :product="product" 
          />
        </div>
      </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
      <div class="container">
        <h2 class="section-title">–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ü–û</h2>
        <div class="categories-grid">
          <div class="category-card" @click="navigateToCategory('Antivirus')">
            <div class="category-icon">üõ°Ô∏è</div>
            <h3 class="category-title">–ê–Ω—Ç–∏–≤–∏—Ä—É—Å—ã</h3>
            <p class="category-description">–ó–∞—â–∏—Ç–∞ –æ—Ç –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –∏ –∫–∏–±–µ—Ä–∞—Ç–∞–∫</p>
          </div>
          <div class="category-card" @click="navigateToCategory('Graphics')">
            <div class="category-icon">üé®</div>
            <h3 class="category-title">–ì—Ä–∞—Ñ–∏–∫–∞</h3>
            <p class="category-description">–§–æ—Ç–æ –∏ –≤–∏–¥–µ–æ—Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –¥–ª—è —Ç–≤–æ—Ä—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á</p>
          </div>
          <div class="category-card" @click="navigateToCategory('Office')">
            <div class="category-icon">üìä</div>
            <h3 class="category-title">–û—Ñ–∏—Å–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</h3>
            <p class="category-description">–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏ –∏ –¥–∞–Ω–Ω—ã–º–∏</p>
          </div>
          <div class="category-card" @click="navigateToCategory('Development')">
            <div class="category-icon">üíª</div>
            <h3 class="category-title">–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞</h3>
            <p class="category-description">–°—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤</p>
          </div>
          <div class="category-card" @click="navigateToCategory('Utilities')">
            <div class="category-icon">üîß</div>
            <h3 class="category-title">–£—Ç–∏–ª–∏—Ç—ã</h3>
            <p class="category-description">–ü–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Promotions Section -->
    <section class="promotions-section">
      <div class="container">
        <h2 class="section-title">–ê–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏</h2>
        <div class="promotions-grid">
          <div class="promotion-card">
            <div class="promotion-content">
              <div class="promotion-badge">-30%</div>
              <h3 class="promotion-title">–°–∫–∏–¥–∫–∞ –Ω–∞ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å—ã</h3>
              <p class="promotion-description">–ó–∞—â–∏—Ç–∏—Ç–µ —Å–≤–æ–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –≤—ã–≥–æ–¥–æ–π –¥–æ 30%</p>
              <div class="promotion-timer">
                <div class="timer-item">
                  <span class="timer-value">2</span>
                  <span class="timer-label">–¥–Ω—è</span>
                </div>
                <div class="timer-item">
                  <span class="timer-value">8</span>
                  <span class="timer-label">—á–∞—Å–æ–≤</span>
                </div>
                <div class="timer-item">
                  <span class="timer-value">45</span>
                  <span class="timer-label">–º–∏–Ω—É—Ç</span>
                </div>
              </div>
              <NuxtLink to="/catalog?category=Antivirus" class="btn btn-outline-primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</NuxtLink>
            </div>
          </div>
          <div class="promotion-card">
            <div class="promotion-content">
              <div class="promotion-badge">-20%</div>
              <h3 class="promotion-title">–ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã</h3>
              <p class="promotion-description">–°–∫–∏–¥–∫–∏ –Ω–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –¥–∏–∑–∞–π–Ω–µ—Ä–æ–≤</p>
              <NuxtLink to="/catalog?category=Graphics" class="btn btn-outline-primary">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</NuxtLink>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Testimonials Section -->
    <section class="testimonials-section">
      <div class="container">
        <h2 class="section-title">–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h2>
        <div class="testimonials-slider">
          <div class="testimonial-card">
            <div class="testimonial-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            <p class="testimonial-text">
              "–û—Ç–ª–∏—á–Ω—ã–π –º–∞–≥–∞–∑–∏–Ω —Å —à–∏—Ä–æ–∫–∏–º –≤—ã–±–æ—Ä–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. –ë—ã—Å—Ç—Ä–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ –∫–ª—é—á–µ–π –∏ –æ—Ç–∑—ã–≤—á–∏–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞."
            </p>
            <div class="testimonial-author">
              <div class="testimonial-avatar">
                <PlaceholderImage 
                  width="40px" 
                  height="40px" 
                  bgColor="#3366FF" 
                  fontSize="0.8rem"
                />
              </div>
              <div class="testimonial-info">
                <div class="testimonial-name">–ê–ª–µ–∫—Å–µ–π –ö.</div>
                <div class="testimonial-date">15 –º–∞—è 2025</div>
              </div>
            </div>
          </div>
          <div class="testimonial-card">
            <div class="testimonial-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
            <p class="testimonial-text">
              "–ö—É–ø–∏–ª–∞ –∞–Ω—Ç–∏–≤–∏—Ä—É—Å —Å–æ —Å–∫–∏–¥–∫–æ–π, –æ—á–µ–Ω—å –¥–æ–≤–æ–ª—å–Ω–∞. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∞–π—Ç–∞ —É–¥–æ–±–Ω—ã–π, –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ –∏ –ø—Ä–æ—Å—Ç–æ."
            </p>
            <div class="testimonial-author">
              <div class="testimonial-avatar">
                <PlaceholderImage 
                  width="40px" 
                  height="40px" 
                  bgColor="#3366FF" 
                  fontSize="0.8rem"
                />
              </div>
              <div class="testimonial-info">
                <div class="testimonial-name">–ú–∞—Ä–∏–Ω–∞ –°.</div>
                <div class="testimonial-date">10 –º–∞—è 2025</div>
              </div>
            </div>
          </div>
          <div class="testimonial-card">
            <div class="testimonial-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
            <p class="testimonial-text">
              "–•–æ—Ä–æ—à–∏–π –≤—ã–±–æ—Ä –ø—Ä–æ–≥—Ä–∞–º–º –¥–ª—è –¥–∏–∑–∞–π–Ω–∞. –ü—Ä–∏–æ–±—Ä–µ–ª PixelMaster Pro, —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ. –†–µ–∫–æ–º–µ–Ω–¥—É—é!"
            </p>
            <div class="testimonial-author">
              <div class="testimonial-avatar">
                <PlaceholderImage 
                  width="40px" 
                  height="40px" 
                  bgColor="#3366FF" 
                  fontSize="0.8rem"
                />
              </div>
              <div class="testimonial-info">
                <div class="testimonial-name">–î–º–∏—Ç—Ä–∏–π –ü.</div>
                <div class="testimonial-date">5 –º–∞—è 2025</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>
</template>

<script setup lang="ts">
import { onMounted, computed } from 'vue';
import { useProductStore } from '~/stores/productStore';
import { useFilterStore } from '~/stores/filterStore';

// Import ProductCard component
// This will be created later

const productStore = useProductStore();
const filterStore = useFilterStore();

// Fetch products on component mount
onMounted(async () => {
  await productStore.fetchProducts();
});

// Get featured products
const featuredProducts = computed(() => {
  return productStore.getFeaturedProducts;
});

// Navigate to category
const navigateToCategory = (category: string) => {
  filterStore.setCategory(category);
  navigateTo('/catalog');
};
</script>

<style lang="scss" scoped>
.home-page {
  .section-title {
    text-align: center;
    margin-bottom: $spacer * 2;
    position: relative;
    
    &::after {
      content: '';
      display: block;
      width: 60px;
      height: 3px;
      background-color: $primary;
      margin: $spacer * 0.5 auto 0;
    }
  }
  
  // Hero Section
  .hero-section {
    padding: $spacer * 3 0;
    background: linear-gradient(135deg, lighten($primary, 35%), lighten($secondary, 35%));
    margin-bottom: $spacer * 3;
    
    .container {
      display: flex;
      align-items: center;
      justify-content: space-between;
      
      @media (max-width: map-get($breakpoints, lg)) {
        flex-direction: column;
        text-align: center;
      }
    }
    
    .hero-content {
      flex: 1;
      max-width: 600px;
      
      @media (max-width: map-get($breakpoints, lg)) {
        max-width: 100%;
        margin-bottom: $spacer * 2;
      }
    }
    
    .hero-title {
      font-size: 2.5rem;
      font-weight: $font-weight-bold;
      margin-bottom: $spacer;
      color: $gray-900;
      
      @media (max-width: map-get($breakpoints, md)) {
        font-size: 2rem;
      }
    }
    
    .hero-subtitle {
      font-size: $font-size-lg;
      color: $gray-700;
      margin-bottom: $spacer * 1.5;
    }
    
    .hero-cta {
      .btn-lg {
        padding: $spacer * 0.75 $spacer * 1.5;
        font-size: $font-size-lg;
      }
    }
    
    .hero-image {
      flex: 1;
      max-width: 500px;
      
      @media (max-width: map-get($breakpoints, lg)) {
        max-width: 100%;
        display: none;
      }
    }
    
    .hero-image-placeholder {
      background-color: rgba($primary, 0.1);
      border-radius: $border-radius-lg;
      height: 300px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      overflow: hidden;
    }
    
    .hero-badge {
      position: absolute;
      top: 69px;
      right: -56px;
      background-color: $secondary;
      color: white;
      padding: $spacer * 0.5 $spacer * 2;
      transform: rotate(45deg);
      font-weight: $font-weight-bold;
    }
  }
  
  // Products Section
  .products-section {
    padding: $spacer * 2 0;
    margin-bottom: $spacer * 3;
    
    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
      gap: $spacer * 1.5;
    }
    
    .loading-spinner, .error-message {
      text-align: center;
      padding: $spacer * 2;
    }
  }
  
  // Categories Section
  .categories-section {
    padding: $spacer * 2 0;
    margin-bottom: $spacer * 3;
    background-color: $gray-100;
    
    .categories-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: $spacer * 1.5;
    }
    
    .category-card {
      background-color: white;
      border-radius: $border-radius;
      padding: $spacer * 1.5;
      text-align: center;
      box-shadow: $box-shadow-sm;
      transition: $transition-base;
      cursor: pointer;
      
      &:hover {
        transform: translateY(-5px);
        box-shadow: $box-shadow;
      }
    }
    
    .category-icon {
      font-size: 2.5rem;
      margin-bottom: $spacer;
    }
    
    .category-title {
      font-size: $h5-font-size;
      margin-bottom: $spacer * 0.5;
    }
    
    .category-description {
      font-size: $font-size-sm;
      color: $gray-600;
    }
  }
  
  // Promotions Section
  .promotions-section {
    padding: $spacer * 2 0;
    margin-bottom: $spacer * 3;
    
    .promotions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
      gap: $spacer * 1.5;
      
      @media (max-width: map-get($breakpoints, sm)) {
        grid-template-columns: 1fr;
      }
    }
    
    .promotion-card {
      border-radius: $border-radius;
      overflow: hidden;
      box-shadow: $box-shadow-sm;
      background: linear-gradient(135deg, lighten($primary, 40%), lighten($secondary, 40%));
      height: 100%;
      
      &:hover {
        box-shadow: $box-shadow;
      }
    }
    
    .promotion-content {
      padding: $spacer * 2;
      position: relative;
    }
    
    .promotion-badge {
      position: absolute;
      top: $spacer;
      right: $spacer;
      background-color: $secondary;
      color: white;
      font-weight: $font-weight-bold;
      padding: $spacer * 0.25 $spacer * 0.5;
      border-radius: $border-radius-pill;
    }
    
    .promotion-title {
      font-size: $h4-font-size;
      margin-bottom: $spacer * 0.5;
    }
    
    .promotion-description {
      color: $gray-700;
      margin-bottom: $spacer;
    }
    
    .promotion-timer {
      display: flex;
      gap: $spacer;
      margin-bottom: $spacer;
    }
    
    .timer-item {
      background-color: $gray-900;
      color: white;
      border-radius: $border-radius;
      padding: $spacer * 0.5;
      min-width: 60px;
      text-align: center;
    }
    
    .timer-value {
      display: block;
      font-size: $h4-font-size;
      font-weight: $font-weight-bold;
    }
    
    .timer-label {
      font-size: $font-size-sm;
      opacity: 0.8;
    }
  }
  
  // Testimonials Section
  .testimonials-section {
    padding: $spacer * 2 0;
    margin-bottom: $spacer * 3;
    background-color: $gray-100;
    
    .testimonials-slider {
      display: flex;
      gap: $spacer * 1.5;
      overflow-x: auto;
      padding: $spacer * 0.5;
      
      &::-webkit-scrollbar {
        height: 5px;
      }
      
      &::-webkit-scrollbar-thumb {
        background-color: $gray-400;
        border-radius: $border-radius-pill;
      }
    }
    
    .testimonial-card {
      background-color: white;
      border-radius: $border-radius;
      padding: $spacer * 1.5;
      box-shadow: $box-shadow-sm;
      min-width: 300px;
      max-width: 350px;
      flex: 1;
    }
    
    .testimonial-rating {
      color: $warning;
      margin-bottom: $spacer * 0.5;
    }
    
    .testimonial-text {
      font-style: italic;
      margin-bottom: $spacer;
      color: $gray-700;
    }
    
    .testimonial-author {
      display: flex;
      align-items: center;
    }
    
    .testimonial-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      margin-right: $spacer * 0.75;
    }
    
    .testimonial-name {
      font-weight: $font-weight-medium;
    }
    
    .testimonial-date {
      font-size: $font-size-sm;
      color: $gray-600;
    }
  }
}
</style>
